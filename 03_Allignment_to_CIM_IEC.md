# CIM-Based Model Alignement
The table below details the transition of the original graph database nodes to CIM-aligned nodes, including updated properties and descriptions of changes. 

| **Original Node** | **CIM-Based Node Proposal** | **Properties** | **Description of Change** |
|-------------------|-----------------------------|---------------|---------------------------|
| `DSO` | `Organisation` | `mRID: String`, `name: String`, `serviceRegion: Location`, `activityRecords: ActivityRecord[]`, `organisationRole: String` | Redefined as `Organisation` per IEC 61968::Common. `supplyArea` is replaced with `serviceRegion` (Location with Polygon geometry). `dateRegistered` moves to `activityRecords`, and `reliabilityIndices` are derived from linked `OutageRecord` or `FailureEvent`, aligning with IEC 61968-4. |
| `Substation` | `Substation` | `mRID: String`, `name: String`, `voltageLevels: VoltageLevel[]`, `installationDate: Date`, `location: PositionPoints` | Retains name, mapping to CIM’s `Substation` (IEC 61970::Wires). `highVoltageLimit` and `lowVoltageLimit` are replaced with `voltageLevels` (`nominalVoltage`), per IEC 61968-11. `coordinates` become `location` (PositionPoints). Subtype labels are replaced with CIM relationships. |
| `MVCSystem` | `AssetContainer` | `mRID: String`, `name: String`, `containedAssets: ACLineSegment[]`, `operationalMeasurements: MeasurementValue[]` | Redefined as `AssetContainer` to group `ACLineSegments` and equipment, per IEC 61968-11. `averageLoading` and `maxLoading` move to `operationalMeasurements`, reflecting CIM’s dynamic data approach. |
| `MVCSubsection` | `ACLineSegment` | `mRID: String`, `length: Float`, `assetInfo: CableInfo`, `installationDate: Date`, `location: PositionPoints`, `status: String`, `isRepairSection: Boolean` | Maps to `ACLineSegment` (IEC 61970::Wires). Properties like `conductorMaterial` move to `CableInfo` (IEC 61968-4). `id` becomes `mRID`, `coordinates` become `location`. `isRepairSection` and `outOfService` consolidate into `status`. |
| `CableJoint` | `Junction + Asset` | `mRID: String`, `assetInfo: JointInfo`, `location: PositionPoints`, `terminals: Terminal[]`, `installationDate: Date` | Split into `Junction` (electrical) and `Asset` (physical), per IEC 61968-4 and IEC 61970::Wires. `jointType` and `manufacturer` move to `JointInfo`. `coordinatesInstalled` become `location`. `terminals` link to `ACLineSegments`. |
| `CableEvent` | `FailureEvent / WorkOrder` | `mRID: String`, `eventType: String`, `startTime: Date`, `endTime: Date`, `affectedAsset: ACLineSegment/Junction`, `cause: String`, `failureMode: String`, `workDetails: String`, `location: PositionPoints` | Split into `FailureEvent` (failures) and `WorkOrder` (repairs) per IEC 61968-6. `eventStart`/`end` map to timestamps, `causeOfEvent` to `faultCause`/`comment`, `repairSpecs` to `workDetails`. `locationOfEvent` is optional. |
| `ExternalEvent` | `ActivityRecord` | `mRID: String`, `eventType: String`, `startTime: Date`, `endTime: Date`, `location: PositionPoints`, `attributes: Object`, `associatedAssets: ACLineSegment[]` | Redefined as `ActivityRecord` (IEC 61968::Common). `utilityType`, `intensity`, etc., move to `attributes`. `reportedTo` links to a `Document`. Connects to affected assets for fault analysis. |
| `LocationDriver` | `Location / Measurement` | `mRID: String`, `locationType: String`, `locationAttributes: Object`, `measurementValues: Object[]`, `timeRangeStart: Date`, `timeRangeEnd: Date`, `position: PositionPoints`, `associatedAssets: ACLineSegment[]` | Split into `Location` (static, e.g., SoilType) and `Measurement` (dynamic, e.g., weather) per IEC 61968-4. `locationAttributes` and `measurementValues` separate static and dynamic data. `gridCoordinates` become `position`. |

## Edge Transition to CIM/IEC 61968 Standards

The table below describes the transformation of each edge in the original graph database model to align with CIM/IEC 61968 standards. It includes the updated properties, direction, and a description of changes to maintain compatibility with IEC 61968 Parts 4 (Asset Records), 6 (Maintenance & Construction), and 11 (CIM Extensions for Distribution).

| **Edge** | **Properties** | **Direction** | **Description** |
|----------|----------------|---------------|-----------------|
| `OPERATES` | `mRID: String`, `dateFrom: Date`, `dateTo: Date`, `roleType: String` | `Organisation → AssetContainer/Substation` | Retained as `OPERATES`, linking `Organisation` (DSO) to `AssetContainer` (MVCSystem) or `Substation`. Properties include `mRID` for unique identification and `roleType` to specify the role (e.g., Operator), aligning with IEC 61968-4’s OrganisationRole for asset management. |
| `FEEDS` | `mRID: String`, `connectionDate: Date`, `terminalIds: String[]` | `Substation → AssetContainer` | Redefined to use CIM’s `Terminal` and `ConnectivityNode` model (IEC 61968-11). Links a `Substation` (via its `PowerTransformer` and `Terminal`) to an `AssetContainer` (MVCSystem). `terminalIds` reference CIM `Terminal` objects for precise electrical connectivity. |
| `CONNECTS_TO` | `mRID: String`, `connectionDate: Date`, `terminalIds: String[]` | `Substation → AssetContainer` | Maps to CIM’s connectivity model (IEC 61968-11), linking `Substation` to `AssetContainer` via `Terminals` and `ConnectivityNodes`. `terminalIds` ensure accurate representation of electrical paths, replacing the original simplified connection. |
| `PARENT_OF` | `mRID: String`, `relationshipDate: Date` | `Substation → Substation` | Replaced with CIM’s hierarchical `VoltageLevel` or `Feeder` relationships (IEC 61968-11). Links a Main `Substation` to a Secondary `Substation` via electrical topology or asset hierarchy, with `relationshipDate` tracking establishment. |
| `ROUTES_THROUGH` | `mRID: String`, `connectionDate: Date`, `terminalIds: String[]` | `Substation → ACLineSegment` | Redefined to align with CIM’s `Terminal` and `ConnectivityNode` model (IEC 61968-11). Connects `Substation` to `ACLineSegment` (MVCSubsection) via `terminalIds`, ensuring precise electrical routing and topology representation. |
| `CONTAINS` | `mRID: String`, `groupingDate: Date` | `AssetContainer → ACLineSegment` | Retained as `CONTAINS`, linking `AssetContainer` (MVCSystem) to `ACLineSegment` (MVCSubsection), per IEC 61968-11. `groupingDate` tracks when the grouping was established, aligning with CIM’s container-based asset organization. |
| `JOINS` | `mRID: String`, `connectionDate: Date`, `terminalIds: String[]` | `Junction → ACLineSegment (x2)` | Maps to CIM’s `Junction` with multiple `Terminals` (IEC 61970::Wires). Connects a `Junction` (CableJoint) to two `ACLineSegments` (MVCSubsections) via `terminalIds`, ensuring accurate electrical connectivity per IEC 61968-11. |
| `AFFECTS` | `mRID: String`, `eventDate: Date`, `affectedAssetId: String` | `FailureEvent/WorkOrder → ACLineSegment/Junction` | Retained as `AFFECTS`, linking `FailureEvent` or `WorkOrder` (CableEvent) to `ACLineSegment` or `Junction`, per IEC 61968-6. `affectedAssetId` specifies the impacted asset, aligning with CIM’s event-asset association for fault and maintenance tracking. |
| `REPAIRS` | `mRID: String`, `repairDate: Date`, `workOrderId: String` | `WorkOrder → FailureEvent` | Maps to CIM’s `WorkOrder` linking to a `FailureEvent` (IEC 61968-6). `workOrderId` references the corrective `WorkOrder` addressing a `FailureEvent` (cable failure), enhancing maintenance process tracking. |
| `IMPACTS` | `mRID: String`, `impactDate: Date`, `affectedAssetId: String` | `ActivityRecord → ACLineSegment/Junction` | Retained as `IMPACTS`, linking `ActivityRecord` (ExternalEvent) to `ACLineSegment` or `Junction`, per IEC 61968::Common. `affectedAssetId` identifies impacted assets, supporting fault analysis due to external events (e.g., digging, weather). |
| `CONTRIBUTES_TO` | `mRID: String`, `contributionDate: Date`, `factorType: String` | `Location/Measurement → FailureEvent` | Maps to CIM’s causal linking (IEC 61968-4/6). Connects `Location` or `Measurement` (LocationDriver) to `FailureEvent`, with `factorType` specifying the contribution (e.g., SoilType, WeatherConditions), aligning with CIM’s fault cause analysis. |
| `INFLUENCES` | `mRID: String`, `influenceDate: Date`, `attributeType: String` | `Location/Measurement → ACLineSegment/Junction` | Redefined to link `Location` or `Measurement` (LocationDriver) to `ACLineSegment` or `Junction`, per IEC 61968-4. `attributeType` specifies static (e.g., SoilType) or dynamic (e.g., temperature) influences, supporting environmental impact analysis. |
| `CAUSED_BY` | `mRID: String`, `eventDate: Date`, `causeType: String` | `FailureEvent → ActivityRecord` | Maps to CIM’s `FailureEvent` linking to an `ActivityRecord` (ExternalEvent), per IEC 61968::Common. `causeType` specifies the external cause (e.g., DiggingActivity), aligning with CIM’s fault cause attribution model. |

Note: The model can be enhanced to present edge properties with additional CIM attributes (e.g., `PowerFlow` data for `FEEDS` or `ROUTES_THROUGH`). ALso, enhencing validation for `Terminal` and `ConnectivityNode` relationships to ensure electrical topology accuracy. In practice, it is also necessary to Integrate real-time event data (e.g., via `MeasurementValues`) to dynamically update `IMPACTS` and `CONTRIBUTES_TO` edges.
